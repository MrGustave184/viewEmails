<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Our css -->
    <link rel="stylesheet" href="style.css">
    <title>Emails View</title>
    <!--<script src="search.js"></script>-->
</head>
<body>
    <div class="container-fluid">

    

           
       
           
                <!--<div class="row">
                    
                    <div class="col-8 parent" >
                        
                            <div class="input-group mt-4 ml-2">
                                <input type="search" class="form-control search-radius" onkeyup="searchFilter()" name="search-template" placeholder="Search or select template " id="search-box">
                                <span class="divider-border"></span>
                                <button type="button" class="btn btn-default dropdown-toggle" id="search-box-btn" data-toggle="dropdown">
                                    <span class="caret"></span>
                                </button>
                                <div id="myUL" class="dropdown-menu " role="menu">
                                    <li><a href="#">Adele</a></li>
                                    <li><a href="#">Agnes</a></li>
                                    <li><a href="#">Billy</a></li>
                                    <li><a href="#">Bob</a></li>
                                    <li><a href="#">Calvin</a></li>
                                    <li><a href="#">Christina</a></li>
                                    <li><a href="#">Cindy</a></li>
                                    <li><a href="#">George</a></li>
                                    <li><a href="#">Sam</a></li>
                                    <li><a href="#">Alis</a></li>
                                    <li><a href="#">Alberto</a></li>
                                </div>
                            </div>
                        
                        
                    </div>
                  -->
                
              
               


        
    </div>


<!-- Bootstrap and jQuery -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<!--Test function for li-->
<!--<script>
                                        
    let selectUL = document.getElementById('myUL');
    let array = ['Lorem ipsum dolor sit, amet consectetur adipisicing elit.','Unde eos at non possimus culpa eius, doloremque, dolorem repudiandae ea illum porro,','sunt vel molestiae accusantium facilis. Necessitatibus nemo','bc','bf','ck','lp','th','et']
    for(var i = 0; i < 1000; i++){
        var item = array[Math.floor(Math.random() * array.length)];
        $('#myUL').append("<li><a href='#'>"+"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Unde eos at non possimus culpa eius, doloremque, dolorem repudiandae ea illum porro, sunt vel molestiae accusantium facilis."+item+i+"</a></li>");
    }

</script>-->

<script>
    this.addSearchHTML();
    var li, a, i,filter,txtValue;
    function searchFilter(){
    let input, ul;
    input = document.getElementById('search-box');
    filter = input.value.toUpperCase();
    ul = document.getElementById("myUL");
    li = ul.getElementsByTagName('li');
    //Timer for the search field
	let typingTimer;
    let previousValue = '';
    //If the key pressed actually changed the search string
		if(input.value != this.previousValue){
			//This is how you can wait a set amount of time in javascript
			//setTimeout(function, miliseconds to wait before running the function)

			//Clear the timeout of the function to prevent to fire the event in a separate branch each time
			//we press a key, creating an unnecessary function stack. Instead, we use the same function call
			//wich will wait until we stop typing to run after 2 seconds
			clearTimeout(this.typingTimer);

			//If the search field is not empty, do search, else, do not show the loader icon and 
			//clear the results area
			if(input.value){
                
                //------------------------------------------
                //this.typingTimer = setTimeout(this.searchNames(), 9000);
                this.typingTimer =  setTimeout(()=>{
                    this.searchNames();
                },750);
                console.log(this.typingTimer)
                //----------------------------------------
				//Timer function
				
			} 
		}

		//Keep track of the search string value
        this.previousValue = input.value;
    }

    function searchNames(){
        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByTagName("a")[0];
            txtValue = a.textContent || a.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
                //console.log('primerIF')
            } else {
                li[i].style.display = "none";
                //console.log('segundoIF')
            }
        }
    } 

    function addSearchHTML(){
//The append method adds at the end of the selected element(the body in this case)
    $("body").append(`
    <div class="row">
                
                <div class="col-8 parent" >
                    
                        <div class="input-group mt-4 ml-2">
                            <input type="search" class="form-control search-radius" onkeyup="searchFilter()" name="search-template" placeholder="Search or select template " id="search-box">
                            <span class="divider-border"></span>
                            <button type="button" class="btn btn-default dropdown-toggle" id="search-box-btn" data-toggle="dropdown">
                                <span class="caret"></span>
                            </button>
                            <div id="myUL" class="dropdown-menu " role="menu">
                                <li><a href="#">Adele</a></li>
                                <li><a href="#">Agnes</a></li>
                                <li><a href="#">Billy</a></li>
                                <li><a href="#">Bob</a></li>
                                <li><a href="#">Calvin</a></li>
                                <li><a href="#">Christina</a></li>
                                <li><a href="#">Cindy</a></li>
                                <li><a href="#">George</a></li>
                                <li><a href="#">Sam</a></li>
                                <li><a href="#">Alis</a></li>
                                <li><a href="#">Alberto</a></li>
                            </div>
                        </div>
                    
                    
                </div>`);
            }
</script>


<script>
    $('#search-box').on('input', function() {
        $('#myUL').css('display', $(this).val()  !== '' ? 'block' : 'none')
    });
</script>

<script>
    let myUL = document.getElementById("myUL");
    let search = document.getElementById('search-box');
    $('#search-box-btn').click(function () { // on a click on botton
        //$('#myUL').show(); // show the div with the search results
        $('#myUL').css({
            //'margin-left' : -$('#search-box').outerWidth( true )
        }).toggle();
    })

    $("li").on("click", function(){
        $("#search-box").val($(this).text());
        $('#myUL').hide();
        // myFunction(); You can put this here if you want to search right after a user clicked
    });
</script>

<script>
    $(".chart-section").on('click', function() {
        let pieChart = $(this);
        let table = $("#table");
        let chartBackground = pieChart.css('background-color');
        let chartText = pieChart.html();

        $("#square2").css('transform', 'translate(590px, -26px)');
        $("#square1").css('transform', 'translate(340px, -200px)');

        table.css('background-color', chartBackground).css('transform', 'translate(0px, -458px)').html('Participants Table' + '<br>' + chartText);
    });
</script>
    
<script>
  
    var contentBg = document.getElementById('content');
    var table = document.getElementById('table');
    var square1 = document.getElementById('square1');
    var square2 = document.getElementById('square2');
    var ul = document.getElementById("myUL");
    document.onclick = function(e){
        if(e.target.id == 'content'){
            table.style.transform = 'translate(0px, 0px)';
            square1.style.transform = 'translate(0px, 0px)';
            square2.style.transform = 'translate(0px, 0px)';
            ul.style.display = 'none';
        }
        
    }
  
</script>

<!--<script>
    function light_input(){
        let search = document.getElementById('search-box');
        let button = document.getElementById('search-box-btn');
        //search default style
        search.style.borderStyle = 'none';
        search.style.borderRadius = '5px 0px 0px 0px ';
        search.style.height = ' 3rem';
        search.style.background = '#EEEEEE';
        button.style.borderRadius = '0px 5px 0px 0px';
        document.onclick = function(e){
            if(e.target.id == 'search-box-btn' || e.target.id == 'search-box'){
                search.style.borderRadius = '5px 0px 0px 0px ';
                search.style.height = ' 3rem';
                search.style.background = 'white';
                search.style.outline = 'none';
                search.style.outlineWidth = '0';
                search.style.boxShadow = 'inset 1px 2px 4px rgba(0, 0, 0, 0.01), 0px 0px 8px rgba(0, 0, 0, 0.2)';
                button.style.borderRadius = '0px 5px 0px 0px';
                button.style.boxShadow = 'inset 1px 2px 4px rgba(0, 0, 0, 0.01), 0px 0px 8px rgba(0, 0, 0, 0.2)';
                button.style.background = 'white';
                button.style.outline = 'none';
            
            }
            else{
                search.style.borderStyle = 'none';
                search.style.borderRadius = '5px 0px 0px 0px ';
                search.style.height = ' 3rem';
                search.style.background = '#EEEEEE';
                search.style.boxShadow = 'none';
                button.style.borderRadius = '0px 5px 0px 0px';
                button.style.background = '#EEEEEE';
                button.style.boxShadow = 'none'
                
            }
        }
    }
</script>-->

</body>
</html>